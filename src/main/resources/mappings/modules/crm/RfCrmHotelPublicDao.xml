<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.thinkgem.crm.hotel.dao.RfCrmHotelPublicDao">
    
	<sql id="rfCrmHotelPublicColumns">
		a.id AS "id",
		a.hotel_id AS "hotelId",
		a.hotel_user_id AS "hotelUserId",
		a.is_private AS "isPrivate",
		a.start_time AS "startTime",
		a.end_time AS "endTime",
		a.available AS "available",
		a.create_time AS "createTime",
		a.update_time AS "updateTime",
		a.return_time AS "returnTime",
		a.is_confirm AS "isConfirm",
		a.confirm_user_id AS "confirmUserId"
	</sql>
	
	<sql id="rfCrmHotelPublicJoins">
	</sql>
    
	<select id="get" resultType="RfCrmHotelPublic">
		SELECT 
			<include refid="rfCrmHotelPublicColumns"/>
		FROM rf_crm_hotel_public a
		<include refid="rfCrmHotelPublicJoins"/>
		WHERE a.id = #{id}
	</select>
	
	<select id="findList" resultType="RfCrmHotelPublic">
		SELECT 
			<include refid="rfCrmHotelPublicColumns"/>
		FROM rf_crm_hotel_public a
		<include refid="rfCrmHotelPublicJoins"/>
		<where>
			
			<if test="id != null and id != ''">
				AND a.id = #{id}
			</if>
			<if test="hotelId != null and hotelId != ''">
				AND a.hotel_id = #{hotelId}
			</if>
			<if test="hotelUserId != null and hotelUserId != ''">
				AND a.hotel_user_id = #{hotelUserId}
			</if>
			<if test="isPrivate != null and isPrivate != ''">
				AND a.is_private = #{isPrivate}
			</if>
			<if test="startTime != null and startTime != ''">
				AND a.start_time = #{startTime}
			</if>
			<if test="endTime != null and endTime != ''">
				AND a.end_time = #{endTime}
			</if>
			<if test="available != null and available != ''">
				AND a.available = #{available}
			</if>
			<if test="createTime != null and createTime != ''">
				AND a.create_time = #{createTime}
			</if>
			<if test="updateTime != null and updateTime != ''">
				AND a.update_time = #{updateTime}
			</if>
			<if test="returnTime != null and returnTime != ''">
				AND a.return_time = #{returnTime}
			</if>
			<if test="isConfirm != null and isConfirm != ''">
				AND a.is_confirm = #{isConfirm}
			</if>
			<if test="confirmUserId != null and confirmUserId != ''">
				AND a.confirm_user_id = #{confirmUserId}
			</if>
		</where>
		<choose>
			<when test="page !=null and page.orderBy != null and page.orderBy != ''">
				ORDER BY ${page.orderBy}
			</when>
			<otherwise>
			</otherwise>
		</choose>
	</select>
	
	<select id="findAllList" resultType="RfCrmHotelPublic">
		SELECT 
			<include refid="rfCrmHotelPublicColumns"/>
		FROM rf_crm_hotel_public a
		<include refid="rfCrmHotelPublicJoins"/>
		<where>
			
		</where>		
		<choose>
			<when test="page !=null and page.orderBy != null and page.orderBy != ''">
				ORDER BY ${page.orderBy}
			</when>
			<otherwise>
			</otherwise>
		</choose>
	</select>
	
	<insert id="insert">
		INSERT INTO rf_crm_hotel_public(
			id,
			hotel_id,
			hotel_user_id,
			is_private,
			start_time,
			end_time,
			available,
			create_time,
			update_time,
			return_time,
			is_confirm,
			confirm_user_id
		) VALUES (
			#{id},
			#{hotelId},
			#{hotelUserId},
			#{isPrivate},
			#{startTime},
			#{endTime},
			#{available},
			#{createTime},
			#{updateTime},
			#{returnTime},
			#{isConfirm},
			#{confirmUserId}
		)
	</insert>
	
	<update id="update">
		UPDATE rf_crm_hotel_public SET 	
			hotel_id = #{hotelId},
			hotel_user_id = #{hotelUserId},
			is_private = #{isPrivate},
			start_time = #{startTime},
			end_time = #{endTime},
			available = #{available},
			create_time = #{createTime},
			update_time = #{updateTime},
			return_time = #{returnTime},
			is_confirm = #{isConfirm},
			confirm_user_id = #{confirmUserId}
		WHERE id = #{id}
	</update>


	<update id="returnPublic">
		UPDATE rf_crm_hotel_public SET
		hotel_user_id = #{hotelUserId},
		is_private = #{isPrivate},
		update_time = #{updateTime},
		return_time = #{returnTime}
		WHERE hotel_id = #{hotelId}
	</update>

	<update id="returnPublicByUser">
		UPDATE rf_crm_hotel_public 
		SET hotel_user_id = null,
		is_private = #{isPrivate},
		update_time = #{updateTime},
		return_time = #{returnTime}
		WHERE hotel_user_id = #{hotelUserId}
	</update>
	
	
	<update id="delete">
		DELETE FROM rf_crm_hotel_public
		WHERE id = #{id}
	</update>
	
</mapper>