<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.thinkgem.sc.settlementpay.dao.SettlementPayDao">
    
	<sql id="settlementPayColumns">
		a.id AS "id",
		a.accountid AS "accountid",
		a.accountname AS "accountname",
		a.hotelid AS "hotelid",
		a.hotelpms AS "hotelpms",
		a.hotelname AS "hotelname",
		a.orderid AS "orderid",
		a.sys_orderid AS "sysOrderid",
		a.biztype AS "biztype",
		a.thirdno AS "thirdno",
		a.price AS "price",
		a.sum AS "sum",
		a.paychannel AS "paychannel",
		a.paytype AS "paytype",
		a.buyerid AS "buyerid",
		a.buyermail AS "buyermail",
		a.banktype AS "banktype",
		a.paystatus AS "paystatus",
		a.err_code AS "errCode",
		a.err_code_des AS "errCodeDes",
		a.trade_status AS "tradeStatus",
		a.pay_time AS "payTime",
		a.callback_time AS "callbackTime",
		a.create_time AS "createTime",
		a.update_time AS "updateTime"
	</sql>
	
	<sql id="settlementPayJoins">
	</sql>
    
	<select id="get" resultType="SettlementPay">
		SELECT 
			<include refid="settlementPayColumns"/>
		FROM settlement_pay a
		<include refid="settlementPayJoins"/>
		WHERE a.id = #{id}
	</select>
	
	<select id="findList" resultType="SettlementPay">
		SELECT 
			<include refid="settlementPayColumns"/>
		FROM settlement_pay a
		<include refid="settlementPayJoins"/>
		<where>
			
			<if test="id != null and id != ''">
				AND a.id = #{id}
			</if>
			<if test="accountid != null and accountid != ''">
				AND a.accountid = #{accountid}
			</if>
			<if test="accountname != null and accountname != ''">
				AND a.accountname LIKE 
					<if test="dbName == 'oracle'">'%'||#{accountname}||'%'</if>
					<if test="dbName == 'mssql'">'%'+#{accountname}+'%'</if>
					<if test="dbName == 'mysql'">concat('%',#{accountname},'%')</if>
			</if>
			<if test="hotelid != null and hotelid != ''">
				AND a.hotelid = #{hotelid}
			</if>
			<if test="hotelpms != null and hotelpms != ''">
				AND a.hotelpms = #{hotelpms}
			</if>
			<if test="hotelname != null and hotelname != ''">
				AND a.hotelname LIKE 
					<if test="dbName == 'oracle'">'%'||#{hotelname}||'%'</if>
					<if test="dbName == 'mssql'">'%'+#{hotelname}+'%'</if>
					<if test="dbName == 'mysql'">concat('%',#{hotelname},'%')</if>
			</if>
			<if test="orderid != null and orderid != ''">
				AND a.orderid = #{orderid}
			</if>
			<if test="sysOrderid != null and sysOrderid != ''">
				AND a.sys_orderid = #{sysOrderid}
			</if>
			<if test="biztype != null and biztype != ''">
				AND a.biztype = #{biztype}
			</if>
			<if test="thirdno != null and thirdno != ''">
				AND a.thirdno = #{thirdno}
			</if>
			<if test="beginPrice != null and beginPrice != ''">
				AND a.price <![CDATA[>=]]> #{beginPrice}
			</if>
			<if test="endPrice != null and endPrice != ''">
				AND a.price <![CDATA[<=]]> #{endPrice}
			</if>
			<if test="beginSum != null and beginSum != ''">
				AND a.sum <![CDATA[>=]]> #{beginSum}
			</if>
			<if test="endSum != null and endSum != ''">
				AND a.sum <![CDATA[<=]]> #{endSum}
			</if>
			<if test="paychannel != null and paychannel != ''">
				AND a.paychannel = #{paychannel}
			</if>
			<if test="paytype != null and paytype != ''">
				AND a.paytype = #{paytype}
			</if>
			<if test="buyerid != null and buyerid != ''">
				AND a.buyerid = #{buyerid}
			</if>
			<if test="buyermail != null and buyermail != ''">
				AND a.buyermail = #{buyermail}
			</if>
			<if test="banktype != null and banktype != ''">
				AND a.banktype = #{banktype}
			</if>
			<if test="paystatus != null and paystatus != ''">
				AND a.paystatus = #{paystatus}
			</if>
			<if test="errCode != null and errCode != ''">
				AND a.err_code = #{errCode}
			</if>
			<if test="errCodeDes != null and errCodeDes != ''">
				AND a.err_code_des = #{errCodeDes}
			</if>
			<if test="tradeStatus != null and tradeStatus != ''">
				AND a.trade_status = #{tradeStatus}
			</if>
			<if test="beginPayTime != null and endPayTime != null and beginPayTime != '' and endPayTime != ''">
				AND a.pay_time BETWEEN #{beginPayTime} AND #{endPayTime}
			</if>
			<if test="beginCallbackTime != null and beginCallbackTime != ''">
				AND a.callback_time <![CDATA[>=]]> #{beginCallbackTime} 
			</if>
			<if test="endCallbackTime != null and endCallbackTime != ''">
				AND a.callback_time <![CDATA[<=]]> #{endCallbackTime}
			</if>
			<if test="beginCreateTime != null and beginCreateTime != ''">
				AND a.create_time <![CDATA[>=]]> #{beginCreateTime}
			</if>
			<if test="endCreateTime != null and endCreateTime != ''">
				AND a.create_time <![CDATA[<=]]> AND #{endCreateTime}
			</if>
			<if test="beginUpdateTime != null and endUpdateTime != null and beginUpdateTime != '' and endUpdateTime != ''">
				AND a.update_time BETWEEN #{beginUpdateTime} AND #{endUpdateTime}
			</if>
		</where>
		ORDER BY id
		<choose>
			<when test="page !=null and page.orderBy != null and page.orderBy != ''">
				, ${page.orderBy}
			</when>
			<otherwise>
			</otherwise>
		</choose>
		DESC
	</select>
	
	<select id="findAllList" resultType="SettlementPay">
		SELECT 
			<include refid="settlementPayColumns"/>
		FROM settlement_pay a
		<include refid="settlementPayJoins"/>
		<where>
			
		</where>		
		<choose>
			<when test="page !=null and page.orderBy != null and page.orderBy != ''">
				ORDER BY ${page.orderBy}
			</when>
			<otherwise>
			</otherwise>
		</choose>
	</select>
	
	<insert id="insert">
		INSERT INTO settlement_pay(
			id,
			accountid,
			accountname,
			hotelid,
			hotelpms,
			hotelname,
			orderid,
			sys_orderid,
			biztype,
			thirdno,
			price,
			sum,
			paychannel,
			paytype,
			buyerid,
			buyermail,
			banktype,
			paystatus,
			err_code,
			err_code_des,
			trade_status,
			pay_time,
			callback_time,
			create_time,
			update_time
		) VALUES (
			#{id},
			#{accountid},
			#{accountname},
			#{hotelid},
			#{hotelpms},
			#{hotelname},
			#{orderid},
			#{sysOrderid},
			#{biztype},
			#{thirdno},
			#{price},
			#{sum},
			#{paychannel},
			#{paytype},
			#{buyerid},
			#{buyermail},
			#{banktype},
			#{paystatus},
			#{errCode},
			#{errCodeDes},
			#{tradeStatus},
			#{payTime},
			#{callbackTime},
			#{createTime},
			#{updateTime}
		)
	</insert>
	
	<update id="update">
		UPDATE settlement_pay SET 	
			accountid = #{accountid},
			accountname = #{accountname},
			hotelid = #{hotelid},
			hotelpms = #{hotelpms},
			hotelname = #{hotelname},
			orderid = #{orderid},
			sys_orderid = #{sysOrderid},
			biztype = #{biztype},
			thirdno = #{thirdno},
			price = #{price},
			sum = #{sum},
			paychannel = #{paychannel},
			paytype = #{paytype},
			buyerid = #{buyerid},
			buyermail = #{buyermail},
			banktype = #{banktype},
			paystatus = #{paystatus},
			err_code = #{errCode},
			err_code_des = #{errCodeDes},
			trade_status = #{tradeStatus},
			pay_time = #{payTime},
			callback_time = #{callbackTime},
			create_time = #{createTime},
			update_time = #{updateTime}
		WHERE id = #{id}
	</update>
	
	<update id="delete">
		DELETE FROM settlement_pay
		WHERE id = #{id}
	</update>
	
</mapper>